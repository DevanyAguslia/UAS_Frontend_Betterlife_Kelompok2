<div class="container diary" ng-controller="DiaryController">
    <div class="header text-center">
        <h1 class="text-primary">Diary Reflection Journal</h1>
    </div>

    <!-- Search and Filter -->
    <div class="search-bar mt-4">
        <input 
            type="text" 
            ng-model="search" 
            placeholder="Search by title or reflection content..." 
            class="form-control mb-3" 
            ng-change="fetchEntries()" />
            
        <div class="form-group">
            <label for="filterTag">Filter by Tag:</label>
            <select 
                id="filterTag" 
                class="form-control" 
                ng-model="filterTag" 
                ng-change="fetchEntries()">
                <option value="">-- Select Tag --</option>
                <option ng-repeat="tag in allTags" value="{{tag}}">{{tag}}</option>
            </select>
        </div>
    </div>


    <!-- Entry Form -->
    <div class="entry-form mt-4">
        <input type="text" ng-model="newTitle" placeholder="Title" class="form-control mb-2" />
        <textarea ng-model="newContent" placeholder="Write your reflection..." class="form-control mb-2"></textarea>
        <input type="text" ng-model="newTags" placeholder="Tags (comma separated)" class="form-control mb-2" />
        <select ng-model="newMood" class="form-control mb-2">
            <option value="Excited">Excited</option>
            <option value="Happy">Happy</option>
            <option value="Neutral">Neutral</option>
            <option value="Sad">Sad</option>
            <option value="Angry">Angry</option>
        </select>
        <button class="btn btn-primary" ng-click="createEntry()">Save</button>
    </div>

    <!-- Diary Entries -->
    <div class="entries mt-5">
        <div class="entry" ng-repeat="entry in entries">
            <h3>{{entry.title}}</h3>
            <p>{{entry.content}}</p>
            <p>Tags: {{entry.tags.join(', ')}}</p>
            <p>Mood: {{entry.mood}}</p>
            <button class="btn btn-info" ng-click="updateEntry(entry)">Edit</button>
            <button class="btn btn-danger" ng-click="deleteEntry(entry._id)">Delete</button>
        </div>
    </div>

    <!-- Success Modal -->
<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="successModalLabel">Success</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Diary entry created successfully!
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>

</div>
